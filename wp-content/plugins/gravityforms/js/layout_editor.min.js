!function(S){S.fn.setGroupId=function(e){return this.attr("data-groupId",e),this.each(function(){var t=s(S(this));t&&(t.layoutGroupId=e)}),this},S.fn.setGridColumnSpan=function(e){return null===e?this.css("grid-column","auto / auto"):(this.css("grid-column","span {0}".format(e)),this.each(function(){if(S(this).hasClass("spacer")){var t=S(this).prev(".gfield");(r=s(t)).layoutSpacerGridColumnSpan=e}else(r=s(S(this)))&&(r.layoutGridColumnSpan=e)})),this;var r},S.fn.getGridColumnSpan=function(){var t=parseInt(this.css("gridColumnStart").split(" ")[1]);return isNaN(t)&&void 0!==b&&(t=b),t},String.prototype.format=function(){var r=arguments;return this.replace(/{(\d+)}/g,function(t,e){return void 0!==r[e]?r[e]:t})};var i,c=S("#form_editor_fields_container"),m=S(".gform_editor"),x=S("#gform_fields"),t=S("#no-fields"),e=S("#no-fields-drop"),v=S(".editor-sidebar"),C=S(".gfield-field-action"),_=null,r=".add-buttons button",b=getComputedStyle(x[0])["grid-template-columns"].split(" ").length,y=b/4,w=null,n=!1;function o(t){t.hasClass("ui-draggable")&&t.draggable("destroy").resizable("destroy"),t.draggable({helper:"clone",zIndex:999,handle:".gfield-drag",create:function(t,e){if(!A(S(this))){var r,i=S(this).attr("id").replace("field_",""),n=!!i&&GetFieldById(i);n&&n.layoutGroupId&&!m.hasClass("gform_legacy_markup")?r=n.layoutGroupId:I(S(this),!1)||(r=I()),S(this).setGroupId(r)}},start:function(t,e){x.addClass("dragging"),c.addClass("droppable"),(_=S(this)).addClass("placeholder")},drag:function(t,e){e.helper.width(_.width()).height(_.height()).setGridColumnSpan(null),a(0,e,e.position.top,e.position.left)},stop:function(t,e){x.removeClass("dragging"),c.removeClass("droppable"),_.removeClass("placeholder"),z().removeClass("hovering"),k().data("target")&&d(_,k().data("target"),k().data("where")),k().remove(),e.helper.remove()}}).resizable({handles:"e",start:function(){w=null,x.addClass("resizing")},resize:function(t,e){var r,i,n,o,a,d,s,l,u,h,f=x.outerWidth()/b,g=e.element,p=g.outerWidth(),c=Math.max(y,Math.round(p/f)),m=g.getGridColumnSpan(),v=W(I(g)),C=(i=g,1===(n=(n=v).not(".spacer")).length||n.last()[0]===i[0]),_=v.filter(".spacer"),G=C&&!_.length?null:g.next();null===w&&(w=1<v.length?m+(r=G?H(G):0):b),o=c,a=y,d=w-(1<v.length&&!C?y:0),c=Math.max(a,Math.min(d,o)),S().add(e.helper).add(e.element).css("width","auto").setGridColumnSpan(c),G&&(r=w-c,G.css("width","auto").setGridColumnSpan(r)),c==b||c==w?M(_):C&&!_.length&&H(v)<b&&(l=I(s=g),u=1,h=S('<div class="spacer gfield"></div>').setGroupId(l).setGridColumnSpan(u),s.after(h))},stop:function(){x.removeClass("resizing")}})}function a(t,e,s,l){var r,i,n,o,a,d,u,h,f,g,p;(z().removeClass("hovering"),r=l,i=s,n=c.offset(),o=x.offset(),a=o.top-n.top,d=o.left-n.left,u=C.outerWidth()||null,h=-a+u,f=-d+c.outerWidth()-v.outerWidth()-u,g=-a+c.outerHeight(),p=-d,h<i&&i<g&&p<r&&r<f)?s<0?k().css({top:-30,left:0,height:"4px",width:x.outerWidth()}).data({where:"top",target:z().first()}):s>x.outerHeight()?k().css({top:x.outerHeight()-14,left:0,height:"4px",width:x.outerWidth()}).data({where:"bottom",target:z().last()}):z().not(e.helper).not(this).each(function(){var t=S(this),e=t.position(),r={top:e.top,right:e.left+t.outerWidth(),bottom:e.top+t.outerHeight(),left:e.left};if(i=l,(n=s)<(o=r).bottom&&n>o.top&&i<o.right&&i>o.left){var i,n,o;t.addClass("hovering");var a=function(t,e,r,i,n){var o=r.left+i/2,a=r.right-i/2,d=r.top+n/5,s=r.bottom-n/5;{if(e>r.top&&e<d)return"top";if(e<r.bottom&&s<e)return"bottom";if(t>r.left&&t<o)return"left";if(t<r.right&&a<t)return"right"}return"center"}(l,s,r,t.outerWidth(),t.outerHeight()),d=W(I(t)).length>=b/y;if("left"===a||"right"===a){if(!function(t,e){if(m.hasClass("gform_legacy_markup"))return;if(t.hasClass("gpage")||t.hasClass("gsection")||t.hasClass("gform_hidden"))return;if(e.hasClass("gpage")||e.hasClass("gsection")||e.hasClass("gform_hidden")||"hidden"===e.data("type"))return;if(e.is("button")&&-1!==S.inArray(e.val().toLowerCase(),["page","section"]))return;return 1}(t,_))return;if(d)return}switch(A(t)&&(e=(t=t.prev()).position(),a="right"),k().data({where:a,target:t}),a){case"left":return k().css({top:e.top,left:e.left-10,height:t.outerHeight(),width:"4px"}),!1;case"right":return k().css({top:e.top,left:e.left+t.outerWidth()+6,right:"auto",height:t.outerHeight(),width:"4px"}),!1;case"bottom":return k().css({top:e.top+t.outerHeight()+26,left:0,height:"4px",width:"100%"}),!1;case"top":return k().css({top:e.top-30,left:0,height:"4px",width:"100%"}),!1}}}):k(!1).remove()}function d(t,e,r){if(e){var i,n,o,a,d,s,l,u,h,f,g;if(s=I(t),o=W(d=I(e)),A(e)?e=(u=e).prev():A(e.next())&&!1!==o.index(e.next())&&(u=e.next()),u&&(i=u.getGridColumnSpan(),M(u),o=W(d)),l="left"===r||"right"===r,"top"==r?e=o.first():"bottom"==r&&(e=o.last()),"top"==r||"left"==r?t.insertBefore(e):t.insertAfter(e),l)if(i?(a=t,n=i):(f=(h=o).first().getGridColumnSpan(),g=!0,h.each(function(){if(S(this).getGridColumnSpan()!==f)return g=!1}),a=g?(n=b/(o.length+1),o.add(t)):(n=(i=e.getGridColumnSpan())/2,e.add(t))),parseInt(n)==n)a.setGridColumnSpan(n);else{var p=Math.floor(n),c=Math.ceil(n);t.setGridColumnSpan(p),e.setGridColumnSpan(c)}else d=I(),t.setGridColumnSpan(b);t.setGroupId(d),G(s)}}function I(t,e){var r;return void 0!==t&&(r=t.attr("data-groupId")),r||!e&&void 0!==e||(r="xxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})),r}function W(t){return z().filter('[data-groupId="{0}"]'.format(t)).not(".ui-draggable-dragging")}function H(t){var e=0;return t.each(function(){e+=S(this).getGridColumnSpan()}),e}function G(t){var e=W(t),r=b/e.length;e.setGridColumnSpan(r)}function M(t){t.setGridColumnSpan(0).remove()}function A(t){return 0<t.filter(".spacer").length}function s(t){var e=t.attr("id"),r=!(!e||-1===e.indexOf("field_"))&&String(e).replace("field_","");return!!r&&GetFieldById(r)}function l(t){return StartAddField(t,Math.max(0,x.children().index(_)))}function u(){z().removeClass("field_selected"),S(".sidebar").tabs("option","active",0),HideSettings()}function z(){return x.find(".gfield")}function k(t){t=void 0===t;var e=S("#indicator");return!e.length&&t&&(e=S('<div id="indicator"></div>'),x.append(e)),e}o(z()),S(r).on("mousedown touchstart",function(){S(this).attr("title","")}).draggable({helper:"clone",revert:function(){return!1},cancel:!1,appendTo:x,containment:"document",start:function(t,e){if(u(),c.addClass("droppable"),1==gf_vars.currentlyAddingField)return!1;e.helper.width(S(this).width()).height(S(this).height()),x.addClass("dragging"),(_=S(this).clone()).addClass("placeholder"),S(this).addClass("fieldPlaceholder")},drag:function(t,e){if(form.fields.length){var r=+e.position.top+e.helper.outerHeight()/2,i=+e.position.left+e.helper.outerWidth()/2;a(0,e,r,i)}},stop:function(t,e){S(this).removeClass("fieldPlaceholder"),c.removeClass("droppable"),x.removeClass("dragging");var r=!1;!form.fields.length&&n?(n=!1,r=l(e.helper.data("type"))):form.fields.length&&k(!1).data("target")&&(r=l(e.helper.data("type"))),r||(k(!1).remove(),_.remove(),_=null),S(this).attr("title",S(this).attr("data-description"))}}).on("click keypress",function(){_=null}),t.droppable({accept:r,activate:function(t,e){S(this).addClass("ready")},over:function(){S(this).addClass("hovering"),e.addClass("hovering")},out:function(){S(this).removeClass("hovering"),e.removeClass("hovering")},drop:function(){n=!0,S(this).removeClass("hovering"),e.removeClass("hovering")},deactivate:function(){S(this).removeClass("ready")}}),c.on("click",function(){u()}),S(document).on("gform_field_added",function(t,e,r){var i=S("#field_"+r.id);null===_?i.setGroupId(I()):(d(i,k().data("target"),k().data("where")),_.remove(),_=null),k().remove(),o(i)}),S(document).on("gform_field_deleted",function(t,e,r){i=I(S("#field_"+r))}),gform.addAction("gform_after_field_removed",function(t,e){G(i)}),gform.addAction("gform_field_duplicated",function(t,e,r,i){W(I(S("#field_"+i))).last().after(r),r.setGridColumnSpan(b).setGroupId(I()),o(r)}),gform.addAction("gform_after_refresh_field_preview",function(t){o(S("#field_"+t))})}(jQuery);